<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>KCSKNCGRID 2025 - TRAVERSE</title>
  <style>
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      background: #f2f2f2;
    }
    html, body {
  height: 100%;
  margin: 0;
  padding: 0;
  overflow: hidden;
}

body {
  font-family: Arial, sans-serif;
  background: #f2f2f2;
  display: flex;
  flex-direction: column;
}


     /* .header {
      background: url("header.jpg") no-repeat center;
      background-size: cover;
      height: 100px;
      text-align: center;
      color: #fff;
      padding: 15px 0;
    } */
    .fullscreen-modal {
      position: fixed;
      inset: 0;
      background: linear-gradient(to right, #ffecd2, #fcb69f);
      display: flex;
      justify-content: center;
      align-items: center;
      flex-direction: column;
      z-index: 10;
      font-size: 1.2rem;
      color: #333;
      text-align: center;
      padding: 20px;
    }
    .fullscreen-modal h1 {
      font-size: 2.5rem;
      margin-bottom: 20px;
    }
    .fullscreen-modal p {
      font-size: 1.3rem;
      max-width: 600px;
      margin-bottom: 30px;
    }
    input {
      font-size: 1.2rem;
      padding: 10px;
    }
    .main-container {
      display: flex;
      justify-content: center;
      margin: 20px;
    }
    .grid {
      display: grid;
      grid-template-columns: repeat(8, 50px);
      gap: -10px;
      margin:-10px;
    }
    .cell input {
      width: 50px;
      height: 50px;
      text-align: center;
      font-size: 1.2rem;
      text-transform: uppercase;
    }

    .highlight {
      background: yellow !important;
    }
    .sidebar {
      margin-left: 90px;
    }
    .top-panel {
      display: flex;
      justify-content: center;
      gap: -20px;
      font-weight: bold;
      font-size: 1.2rem;
    }
    button {
      padding: 12px 24px;
      font-size: 1rem;
      margin-top: 20px;
      cursor: pointer;
      background: #ff6f61;
      color: white;
      border: none;
      border-radius: 5px;
    }
    button:hover {
      background: #e2584d;
    }
    #timerOverMsg {
      font-size: 1.5rem;
      color: red;
      margin-top: 10px;
    }
    #usernameDisplay {
      font-size: 1.2rem;
      text-align: center;
      margin-top: 10px;
      font-weight: bold;
    }
  </style>
</head>
<body>
<div id="passwordModal" style="
  display:none;
  position:fixed;
  top:50%;
  left:50%;
  transform:translate(-50%, -50%);
  background:white;
  padding:20px;
  border:2px solid #444;
  box-shadow:0 0 10px rgba(0,0,0,0.3);
  z-index:9999;
  text-align:center;
">
  <p>‚è∞ Time‚Äôs up! Enter the password to reveal the answers:</p>
  <input type="password" id="revealPassword" placeholder="Enter password" />
  <br><br>
  <button onclick="checkRevealPassword()">Submit</button>
</div>

<!-- Instruction Modal -->
<div class="fullscreen-modal" id="instructionModal">
  <img src="header.jpg" alt="Title" style="width: 100%; height: auto; display: block; max-height: 350px; object-fit: cover;">
  <h1>üéØ Welcome to the Ultimate Crossword Challenge!</h1>
  <p style="text-align: justify; font-size: 18px; line-height: 1.6;">
  ‚Ä¢ Clues will be displayed to help you solve the puzzle.<br>
  ‚Ä¢ You have <strong>15 minutes</strong> to complete the entire crossword.<br>
  ‚Ä¢ Click on any numbered cell to automatically highlight its corresponding clue.<br>
  ‚Ä¢ The cursor will move automatically as you type the answer.<br>
  ‚Ä¢ Each correct answer earns you <strong>1 point</strong>. <strong>No negative marks</strong> for wrong answers.<br><br>
 </p>

  <button id="instructionBtn"> üéØ Get ready to start!!!... 10</button>
</div>

<!-- Login Modal -->
<div class="fullscreen-modal" id="loginModal" style="display:none; background-image: url('poster.jpeg')">
  <h1>üîê Login</h1>
  <input id="usernameInput" type="text" oninput="this.value = this.value.toUpperCase();" placeholder="Username"><br><br>
  <input id="classInput" type="text" oninput="this.value = this.value.toUpperCase();" placeholder="Classname"><br><br>
  <input id="passwordInput" type="password" placeholder="Password"><br><br>
  <button onclick="validateLogin()">Login</button>
  <p id="loginError" style="color:red;"></p>
</div>

<!-- Puzzle -->
 <div class="header"></div>
<div id="gameArea" style="display:none; background-color:bisque;">
    
  <div class="top-panel">
    <div>‚è∞ Time: <span id="timer">00:00</span></div>
    <div>‚≠ê Score: <span id="score">0</span></div>
  </div>
 <div id="currentClueDisplay" style="font-weight:bold; font-size:1.2rem; text-align:center; margin: 10px 0;">
  Solve this clue!
</div>

  <div id="timerOverMsg"></div>
  <div id="usernameDisplay"></div>

  <div class="main-container">
    <div>
      <div class="grid" id="puzzleGrid"></div>
    <!-- <button onclick="checkAnswers()">‚úîÔ∏è Check Answers</button> -->
    </div>
    <div class="sidebar">
      <h3>Across</h3>
      <ul>
        <li onclick="highlightClue('A1')">1: Call from an unknown number, often </li>
        <li onclick="highlightClue('A4')">4: Short form of an agreement </li>
        <li onclick="highlightClue('A5')">5: App customers</li>
        <li onclick="highlightClue('A8')">8: Meta, Gemini, ChatGPT</li>
        <li onclick="highlightClue('A9')">9: Like restrictions you might mention to a waiter</li>
        <li onclick="highlightClue('A10')">10: Ecosport, Figo, Endeavour</li>
        <li onclick="highlightClue('A11')">11: Something placed with a server</li>
        <li onclick="highlightClue('A14')">14: Smart Home Technology</li>
        <li onclick="highlightClue('A15')">15: Line on a receipt </li>
        <li onclick="highlightClue('A16')">16: Language that's third in number of worldwide speakers, after Mother Tongue and English</li>
        <li onclick="highlightClue('A17')">17: Low in glow</li>
        <li onclick="highlightClue('A18')">18: Untruth</li>
        <li onclick="highlightClue('A19')">19: Complimentary</li>
        <li onclick="highlightClue('A20')">20: Gadget</li>
        
      </ul>
      <h3>Down</h3>
      <ul>
        <li onclick="highlightClue('D1')">1: Picture that employs the flip camera button</li>
        <li onclick="highlightClue('D2')">2: The way some puzzlers fill a print crossword in</li>
         <li onclick="highlightClue('D3')">3: Phone popup </li>
        <li onclick="highlightClue('D6')">6: Something to stand for</li>            
        <li onclick="highlightClue('D7')">7 : Opposite of south</li>
        <li onclick="highlightClue('D8')">8: Press "+"  </li>
        <li onclick="highlightClue('D10')">10: Open area for sports or farming</li>
        <li onclick="highlightClue('D12')">12: Move to music</li>
        <li onclick="highlightClue('D13')">13: What "III" can mean </li>
         <li onclick="highlightClue('D15')">15: Even Score</li>
        <li onclick="highlightClue('D16')">16: Box office success </li>            
      </ul>
    </div>
  </div>
</div>

<script>
  
  const clueTexts = {
  A1: "1: Call from an unknown number",
  A4: "4: Short form of an agreement ",
  A5: "5: App customers ",
  A8: "8: Meta, Gemini, ChatGPT ",
  A9: "9: like restrictions you might mention to a waiter ",
  A10: "10: Ecosport, Figo, Endeavour  ",
  A11: "11: Something placed with a server ",
  A14: "14: Smart Home Technology ",
  A15: "15: Line on a receipt ",
  A16: "16: Language that's third in number of worldwide speakers, after Mother Tongue and English ",
  A17: "17: Low in glow ",
  A18: "18: Untruth",
  A19: "19: Complimentary",
  A20: "20: Gadget",
  D1: "1: Picture that employs the flip camera button ",
D2: "2: The way some puzzlers fill a print crossword in  ",
D3: "3: Phone popup  ",
D6: "6: Something to stand for  ",
D7: "7: Opposite of south  ",
D8: "8: Press "+"  ",
D10: "10: Open area for sports or farming  ",
D12: "12: Move to music",
D13: "13: What III can mean ",
D15: "15: Even Score",
D16: "16: Box office success ",
};
const clueMapping = {
  A1: [[0,0], [0,1], [0,2], [0,3]],
  A4: [[0,3], [0,4], [0,5]],
  A5: [[0,5],[1,5],[2,5],[3,5],[4,5]],
  A8: [[1,3], [1,4]],
  A9: [[2,3], [2,4], [2,5],[2,6]],
  A10:[[3,0],[3,1], [3,2], [3,3]],
  A11: [[3,1],[3,2],[3,3], [3,4], [3,5]],
  A14: [[4,0], [4,1], [4,2]],
  A15: [[4,2],[4,3],[4,4]],
  A16: [[5,1], [5,2],[5,3],[5,4],[5,5]],
  A17: [[5,4],[5,5],[5,6]],
  A18: [[6,0],[6,1], [6,2]],
  A19: [[6,4], [6,5], [6,6], [6,7]],
  A20: [[7,2], [7,3], [7,4], [7,5],[7,6],[7,7]],
  D1:  [[0,0], [1,0],[2,0], [3,0], [4,0], [5,0]],
  D2:  [[0,1], [1,1], [2,1]],
  D3:  [[0,2], [1,2], [2,2], [3,2], [4,2]],
  D6:  [[0,6],[1,6],[2,6],[3,6],[4,6],[5,6]],
  D7:  [[0,7],[1,7],[2,7],[3,7],[4,7]],
  D8:  [[1,3], [2,3], [3,3]],
  D10: [[3,0],[4,0], [5,0],[6,0],[7,0]],
  D12: [[3,3], [4,3], [5,3],[6,3],[7,3]],
  D13: [[3,7], [4,7], [5,7],[6,7],[7,7]], 
  D15: [[4,2],[5,2],[6,2]],
  D16: [[5,1], [6,1], [7,1]],
};

const clueNumbers = {
  "0,0": 1,
  "0,1": 2,
  "0,2": 3,
  "0,3": 4,
  "0,5": 5,
 "0,6": 6,
 "0,7": 7,
 "1,3": 8,
 "2,3": 9,
 "3,0": 10,
 "3,1": 11,
 "3,3": 12,
 "3,7": 13,
 "4,0": 14,
 "4,2": 15,
 "5,1": 16,
 "5,4": 17,
 "6,0": 18,
 "6,4": 19,
 "7,2": 20,
};

const cellHighlightMap = {
  "0,0": [[0,0], [0,1], [0,2], [0,3], [1,0], [2,0], [3,0], [4,0], [5,0]],
  "0,1": [[0,1], [1,1], [2,1]],
  "0,2": [[0,2], [1,2], [2,2], [3,2], [4,2]],
  "0,3": [[0,3],[0,4],[0,5]],
  "0,5": [[0,5],[1,5],[2,5],[3,5],[4,5]],
  "0,6": [[0,6],[1,6],[2,6],[3,6],[4,6],[5,6]],
  "0,7": [[0,7],[1,7],[2,7],[3,7],[4,7]],
  "1,3": [[1,3], [1,4], [2,3], [3,3]],
  "2,3": [[2,3], [2,4], [2,5],[2,6]],
  "3,0": [[3,0],[3,1], [3,2], [3,3], [4,0], [5,0],[6,0],[7,0]],
  "3,1": [[3,1],[3,2],[3,3], [3,4], [3,5]],
  "3,3": [[3,3], [4,3], [5,3],[6,3],[7,3]],
  "3,7": [[3,7], [4,7], [5,7],[6,7],[7,7]],
  "4,0": [[4,0], [4,1], [4,2]],
  "4,2": [[4,2],[4,3],[4,4],[5,2],[6,2]],
  "5,1": [[5,1], [5,2],[5,3],[5,4],[5,5],[6,1], [7,1]],
  "5,4": [[5,4], [5,5], [5,6]],
  "6,0": [[6,0],[6,1], [6,2]],
  "6,4": [[6,4], [6,5], [6,6], [6,7]],
  "7,2": [[7,2], [7,3], [7,4], [7,5],[7,6],[7,7]]
};

const cellClueTextMap = {
  "0,0": ["A1: Call from an unknown number","D1: Picture that employs the flip camera button"],
  "0,1": ["D2:The way some puzzlers fill a print crossword in"],
  "0,2": ["D3: Phone popup"],
  "0,3": ["A4: Short form of an agreement"],
  "0,5": ["A5: App customers"],
 "0,6":  ["D6: Something to stand for "],
 "0,7":  ["D7: Opposite of south"],
 "1,3":  ["A8: Meta, Gemini, ChatGPT","D8: Press +"  ],
 "2,3":  ["A9: Like restrictions you might mention to a waiter"],
 "3,0":  ["A10:  Ecosport, Figo, Endeavour","D10: Open area for sports or farming"],
 "3,1":  ["A11: Something placed with a server"],
 "3,3":  ["D12:Move to music"],
 "3,7":  ["D13: What III can mean"],
 "4,0":  ["A14: Smart Home Technology"],
 "4,2":  [" A15: Line on a receipt","D15: Even Score"],
 "5,1":  ["A16: Language that's third in number of worldwide speakers, after Mother Tongue and English","D16: Box office success"],
 "5,4":  ["A17: Low in glow "],
 "6,0":  ["A18: Untruth"],
 "6,4":  ["A19: Complimentary"],
 "7,2":  ["A20: Gadget"]
};

const reverseLookup = {};
for (const clue in clueMapping) {
  clueMapping[clue].forEach(([r, c]) => {
    const key = `${r},${c}`;
    if (!reverseLookup[key]) reverseLookup[key] = [];
    reverseLookup[key].push(clue);
  });
}

const answers = {
  "0,0":"S", "0,1":"P", "0,2":"A", "0,3":"M", "0,4":"O", "0,5":"U", "0,6":"A","0,7":"N",
  "1,0":"E", "1,1":"E", "1,2":"L", "1,3":"A", "1,4":"I", "1,5":"S", "1,6":"N","1,7":"O",
  "2,0":"L", "2,1":"N", "2,2":"E", "2,3":"D", "2,4":"I", "2,5":"E", "2,6":"T","2,7":"R",
  "3,0":"F", "3,1":"O", "3,2":"R", "3,3":"D", "3,4":"E", "3,5":"R", "3,6":"H","3,7":"T",
  "4,0":"I", "4,1":"O", "4,2":"T", "4,3":"A", "4,4":"X", "4,5":"S", "4,6":"E","4,7":"H",
  "5,0":"E", "5,1":"H", "5,2":"I", "5,3":"N", "5,4":"D", "5,5":"I", "5,6":"M","5,7":"R",
  "6,0":"L", "6,1":"I", "6,2":"E", "6,3":"C", "6,4":"F", "6,5":"R", "6,6":"E","6,7":"E",
  "7,0":"D", "7,1":"T", "7,2":"D", "7,3":"E", "7,4":"V", "7,5":"I", "7,6":"C","7,7":"E",
};


let activeClue = null;
let seconds = 0;
let score = 0;
let timerRunning = true;
let finalscore=0;
let solvedClueTracker = {}; // To avoid re-scoring already solved clues

function buildGrid() {
  const grid = document.getElementById('puzzleGrid');
  grid.innerHTML = '';

  for (let r = 0; r < 8; r++) {
    for (let c = 0; c < 8; c++) {
      const cell = document.createElement('div');
      cell.className = 'cell';
      cell.style.position = 'relative';

      const input = document.createElement('input');
      input.maxLength = 1;
      input.dataset.row = r;
      input.dataset.col = c;
      input.addEventListener('input', () => {
  autoMove(input);

  const r = parseInt(input.dataset.row);
  const c = parseInt(input.dataset.col);
  const key = `${r},${c}`;
  const clues = reverseLookup[key] || [];

  clues.forEach(clue => {
    let solved = true;

    clueMapping[clue].forEach(([rr, cc]) => {
      const k = `${rr},${cc}`;
      const expected = answers[k];
      const inp = document.querySelector(`input[data-row="${rr}"][data-col="${cc}"]`);

      if (inp.value.toUpperCase() === expected) {
        inp.style.backgroundColor = '#c8e6c9'; // Green
      } else {
        inp.style.backgroundColor = '#ffcdd2'; // Red
        solved = false;
      }
    });

    // Recalculate score across all clues
    let solvedClues = 0;
    Object.keys(clueMapping).forEach(clueKey => {
      let clueSolved = true;
      clueMapping[clueKey].forEach(([rr, cc]) => {
        const k = `${rr},${cc}`;
        const expected = answers[k];
        const inp = document.querySelector(`input[data-row="${rr}"][data-col="${cc}"]`);
        if (inp.value.toUpperCase() !== expected) {
          clueSolved = false;
        }
      });
      if (clueSolved) solvedClues++;
    });

    score = solvedClues;
    document.getElementById('score').textContent = score;

    // üéâ All clues correct?
    const totalClues = Object.keys(clueMapping).length;
    if (solvedClues === totalClues) {
      timerRunning = false;
      const minutes = String(Math.floor(seconds / 60)).padStart(2, '0');
      const secs = String(seconds % 60).padStart(2, '0');
      alert(`üéâ Congratulations! You completed in ${minutes}:${secs} minutes.`);
      document.getElementById('puzzleGrid').style.display = 'none';
    }
  });
});


      // Highlight cells when this input is clicked
      input.addEventListener('click', () => {
        highlightByCell(r, c);
      });
      
      // Optional: clue numbers if needed
      const key = `${r},${c}`;
      if (clueNumbers[key]) {
        const clueNumber = document.createElement('div');
        clueNumber.textContent = clueNumbers[key];
        clueNumber.style.position = 'absolute';
        clueNumber.style.top = '2px';
        clueNumber.style.left = '4px';
        clueNumber.style.fontSize = '0.6rem';
        clueNumber.style.fontWeight = 'bold';
        cell.appendChild(clueNumber);
      }

      cell.appendChild(input);
      grid.appendChild(cell);
    }
  }
}



let activeCellPath = null;  // Stores currently highlighted cells

function highlightByCell(r, c) {
  document.querySelectorAll('.cell input').forEach(inp => inp.classList.remove('highlight'));

  const key = `${r},${c}`;
  const cellsToHighlight = cellHighlightMap[key];

  if (cellsToHighlight) {
    cellsToHighlight.forEach(([row, col]) => {
      const input = document.querySelector(`input[data-row="${row}"][data-col="${col}"]`);
      if (input) input.classList.add('highlight');
    });
  }

  // Fetch clue number (the grid number in small font at top-left)
  const clueNumber = clueNumbers[key];

  // Fetch clue text (from your clue text map)
  const clueTextLines = cellClueTextMap[key] || ["Solve this clue!"];

  // Build display text at top
  if (clueNumber) {
    document.getElementById('currentClueDisplay').innerHTML = clueTextLines.join('<br>');
  } else if (clueTextLines.length > 0) {
    document.getElementById('currentClueDisplay').innerHTML =
      clueTextLines.join('<br>');
  } else {
    document.getElementById('currentClueDisplay').textContent = "No clue assigned to this cell.";
  }
}

function autoMove(input) {
  const highlightedCells = Array.from(document.querySelectorAll('.cell input.highlight'));
  if (highlightedCells.length === 0) return;

  const r = parseInt(input.dataset.row);
  const c = parseInt(input.dataset.col);
  const key = `${r},${c}`;
  const clues = reverseLookup[key] || [];

  // Check if clue is solved
  clues.forEach(clue => checkClueSolved(clue));

  const currentIndex = highlightedCells.indexOf(input);

  if (currentIndex !== -1 && input.value !== '') {
    // Look ahead to next empty cell
    for (let i = currentIndex + 1; i < highlightedCells.length; i++) {
      if (highlightedCells[i].value.trim() === '') {
        highlightedCells[i].focus();
        return;
      }
    }
    // Optional: if all next cells are filled, stop or loop back to first empty
  }
}

function startTimer() {
  const interval = setInterval(() => {
    if (!timerRunning) {
      clearInterval(interval);
      return;
    }
    seconds++;
    const min = String(Math.floor(seconds / 60)).padStart(2, '0');
    const sec = String(seconds % 60).padStart(2, '0');
    document.getElementById('timer').textContent = `${min}:${sec}`;

   if (seconds >= 900) {
  timerRunning = false;  // Stop timer at 2 minutes
  downloadResultAsTxt();

  document.querySelectorAll('.cell input').forEach(input => {
        input.disabled = true;
      });

  const correctPassword = "1234";  // üîê Set your password here
  const userInput = prompt("‚è∞ Time's up! Enter password to reveal the answers:");

  if (userInput === null || userInput.trim() === "") {
    // User clicked cancel or entered nothing
    document.getElementById('timerOverMsg').textContent = "üîí Enter the password to reveal the answer.";
  } else if (userInput === correctPassword) {
    // ‚úÖ Correct password ‚Äî reveal answers
    Object.keys(answers).forEach(key => {
      const [r, c] = key.split(',').map(Number);
      const input = document.querySelector(`input[data-row="${r}"][data-col="${c}"]`);
      if (input) {
        input.value = answers[key];
        input.disabled = true;
        input.style.backgroundColor = '#e0f7fa'; // Revealed background
      }

    });
    document.getElementById('timerOverMsg').textContent = "‚úÖ Answers revealed.";
  } 
}
}, 1000);
}
// ?
function revealCorrectAnswers() {
  const password = prompt("Enter the password to reveal the answers:");

  // You can change this to any password you want
  const correctPassword = "1234";

  if (password === correctPassword) {
    document.querySelectorAll('.cell input').forEach(input => {
      const r = input.dataset.row;
      const c = input.dataset.col;
      const key = `${r},${c}`;
      const correctAnswer = answers[key] || '';

      input.value = correctAnswer;
      input.style.backgroundColor = '#d1c4e9';  // Light purple for revealed answers
      input.disabled = true;
    });
  } 
}


function checkClueSolved(clue) {
  const positions = clueMapping[clue];
  let allCorrect = true;

  for (let [r, c] of positions) {
    const input = document.querySelector(`input[data-row="${r}"][data-col="${c}"]`);
    const expected = answers[`${r},${c}`];
    if (!input || input.value.toUpperCase() !== expected) {
      allCorrect = false;
      break;
    }
  }

  if (allCorrect && !solvedClueTracker[clue]) {
    score += 1;
    solvedClueTracker[clue] = true;
    document.getElementById('score').textContent = score;

    positions.forEach(([r, c]) => {
      const input = document.querySelector(`input[data-row="${r}"][data-col="${c}"]`);
      input.style.backgroundColor = '#c8e6c9';
    });

    if (Object.keys(solvedClueTracker).length === Object.keys(clueMapping).length) {
      timerRunning = false;
      alert(`üéâ All clues solved in ${String(Math.floor(seconds / 60)).padStart(2, '0')}:${String(seconds % 60).padStart(2, '0')}!`);
      document.getElementById('puzzleGrid').style.display = 'none';
    }
  }
}
let count = 10;
const instrBtn = document.getElementById('instructionBtn');
const countdownInterval = setInterval(() => {
  count--;
  instrBtn.textContent = count > 0 ? `Please wait... ${count}` : 'Start';
  if (count <= 0) {
    clearInterval(countdownInterval);
    instrBtn.disabled = false;
    instrBtn.textContent = 'Start';
    instrBtn.onclick = () => {
      document.getElementById('instructionModal').style.display = 'none';
      document.getElementById('loginModal').style.display = 'flex';
    };
  }
}, 1000);

function validateLogin() {
  const username = document.getElementById('usernameInput').value.trim();
  const password = document.getElementById('passwordInput').value.trim();
  if (username === '') {
    document.getElementById('loginError').textContent = 'Please enter your name.';
    return;
  }
  if (password !== '290725') {
    document.getElementById('loginError').textContent = 'Incorrect password.';
    return;
  }
  document.getElementById('loginModal').style.display = 'none';
  document.getElementById('gameArea').style.display = 'block';
  document.getElementById('usernameDisplay').textContent = `üë§ Player: ${username}`;
  buildGrid();
  startTimer();
}
function checkRevealPassword() {
  const inputPassword = document.getElementById('revealPassword').value;
  const correctPassword = "2925"; // Set your password

  if (inputPassword === correctPassword) {
    Object.keys(answers).forEach(key => {
      const [r, c] = key.split(',').map(Number);
      const input = document.querySelector(`input[data-row="${r}"][data-col="${c}"]`);
      if (input) {
        input.value = answers[key];
        input.style.backgroundColor = '#e0f7fa';
      }
    });
    document.getElementById('passwordModal').innerHTML = "<p>‚úÖ Answers revealed.</p>";
  } else {
    alert("‚ùå Incorrect password. Try again.");
  }
}

function checkAnswers() {
  let totalScore = 0;
  let allCorrect = true;

  Object.keys(answers).forEach(key => {
    const [r, c] = key.split(',').map(Number);
    const input = document.querySelector(`input[data-row="${r}"][data-col="${c}"]`);
    if (input) {
      const userAnswer = input.value.trim().toUpperCase();
      if (userAnswer === answers[key]) {
        input.style.backgroundColor = 'lightgreen';
        totalScore += 1;
      } else {
        input.style.backgroundColor = 'red';
        allCorrect = false;
      }
    }
  });

  finalScore = totalScore;
  document.getElementById("score").textContent = finalScore;

  // ‚úÖ Automatically download if all correct and under 2 minutes
  }

function allAnswersCorrect() {
  return Object.keys(answers).every(key => {
    const [r, c] = key.split(',').map(Number);
    const input = document.querySelector(`input[data-row="${r}"][data-col="${c}"]`);
    return input && input.value.trim().toUpperCase() === answers[key];
  });
}
let fileDownloaded = false;

function downloadResultAsTxt() {
if (fileDownloaded) return;
  fileDownloaded = true;
 if (seconds >= 600) {
  timerRunning = false;
  downloadResultAsTxt(); // Download at 2 minutes timeout
}
if (allAnswersCorrect && seconds < 600) {
    
    downloadResultAsTxt();
  }
 
  const name = document.getElementById('usernameInput').value.toUpperCase();
  const studentClass = document.getElementById('classInput').value.toUpperCase();
  const timeTaken = document.getElementById('timer').textContent;
  const score = document.getElementById('score').textContent;
  //const score = finalScore;

  const content = `Player Name: ${name}\nClass: ${studentClass}\nTime: ${timeTaken}\nScore: ${score}`;

  const blob = new Blob([content], { type: "text/plain" });
  const link = document.createElement("a");
  link.href = URL.createObjectURL(blob);
  link.download = `${name}_result.txt`;
  document.body.appendChild(link);
  link.click();
  document.body.removeChild(link);
}
document.addEventListener("DOMContentLoaded", () => {
    // Request fullscreen on page load
    if (document.documentElement.requestFullscreen) {
      document.documentElement.requestFullscreen();
    } else if (document.documentElement.webkitRequestFullscreen) {
      document.documentElement.webkitRequestFullscreen(); // Safari
    } else if (document.documentElement.msRequestFullscreen) {
      document.documentElement.msRequestFullscreen(); // IE11
    }
  }); 
</script>

</body>
</html>
